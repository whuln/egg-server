{"version":3,"sources":["webpack:///./src/views/tasks/TaskHeader.vue?f410","webpack:///./src/views/tasks/TaskHeader.vue?8080","webpack:///src/views/tasks/TaskHeader.vue","webpack:///./src/views/tasks/TaskHeader.vue?e12a","webpack:///./src/views/tasks/TaskHeader.vue","webpack:///./src/views/tasks/MyDispatch.vue?cafd","webpack:///src/views/tasks/MyDispatch.vue","webpack:///./src/views/tasks/MyDispatch.vue?8cb9","webpack:///./src/views/tasks/MyDispatch.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TaskHeader_vue_vue_type_style_index_0_id_19711852_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TaskHeader_vue_vue_type_style_index_0_id_19711852_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","color","slot","icon","on","click","goHome","_v","_t","staticRenderFns","TaskHeadervue_type_script_lang_js_","name","methods","$router","push","tasks_TaskHeadervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","change","listChange","_l","item","key","button","ripple","value","_s","user","staticStyle","margin-left","project","carnumber","isback","title","scrollable","width","transition","open","openAllotFullscreen","update:open","$event","z-depth","caSelected","department","purpose","places","plantime1","plantime2","isshengwai","_e","driver","disabled","full-width","model","callback","$$v","selectDriverIndex","expression","index","label","selectCarIndex","car","number","brand","sites","doSend","doReceive","MyDispatchvue_type_script_lang_js_","components","TaskHeader","data","carApplyinfos","useableDrivers","useableCars","selectedCaIndex","computed","objectSpread","vuex_esm","_doReceive","asyncToGenerator","regeneratorRuntime","mark","_callee","resp","wrap","_context","prev","next","r","post","id","receiveraccount","userinfo","account","isreceived","sent","code","splice","$alert","getUnallotedCarApplyinfos","getUseableCars","getUseableDrivers","t0","stop","apply","arguments","_doSend","_callee2","_context2","senderaccount","driveraccount","msg","self","rolename","state","then","JSON","parse","catch","err","mounted","tasks_MyDispatchvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-fafe46dc.b20e566a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskHeader.vue?vue&type=style&index=0&id=19711852&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskHeader.vue?vue&type=style&index=0&id=19711852&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('mu-appbar',{staticClass:\"header\",attrs:{\"color\":\"red\"}},[_c('mu-button',{attrs:{\"slot\":\"left\",\"icon\":\"\"},on:{\"click\":_vm.goHome},slot:\"left\"},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"keyboard_arrow_left\")])]),_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <mu-appbar class=\"header\" color=\"red\">\r\n      <mu-button icon slot=\"left\" @click=\"goHome\">\r\n        <i class=\"material-icons\">keyboard_arrow_left</i>\r\n      </mu-button>\r\n      <slot></slot>\r\n    </mu-appbar>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name:'TaskHeader',\r\n  methods:{\r\n    goHome(){\r\n      this.$router.push('home')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.header {\r\n  width: 100%;\r\n  height: 30px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TaskHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TaskHeader.vue?vue&type=template&id=19711852&scoped=true&\"\nimport script from \"./TaskHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./TaskHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TaskHeader.vue?vue&type=style&index=0&id=19711852&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19711852\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('task-header',[_vm._v(\"我的调度\")]),_c('mu-list',{on:{\"change\":_vm.listChange}},_vm._l((_vm.carApplyinfos),function(item,key){return _c('mu-list-item',{attrs:{\"button\":\"\",\"ripple\":false,\"value\":key}},[_c('mu-list-item-title',[_vm._v(_vm._s(item.user.name)+\" \"),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(item.project))])]),_c('mu-list-item-action',[_c('div',[_c('br'),_c('span',[_vm._v(_vm._s(item.carnumber?\"已派车\":\"待派车\"))]),_c('br'),_c('span',[_vm._v(_vm._s(item.isback?\"待收车\":\"未返回\"))])])])],1)}),1),_c('mu-dialog',{attrs:{\"title\":\"分配司机、车辆\",\"scrollable\":\"\",\"width\":\"600\",\"transition\":\"slide-bottom\",\"open\":_vm.openAllotFullscreen},on:{\"update:open\":function($event){_vm.openAllotFullscreen=$event}}},[_c('mu-paper',{staticClass:\"demo-list-wrap\",attrs:{\"z-depth\":1}},[_c('mu-list',[_c('mu-list-item',[_vm._v(\"用车人：\"+_vm._s(_vm.caSelected.user?_vm.caSelected.user.name:\"\"))]),_c('mu-list-item',[_vm._v(\"部门 ：\"+_vm._s(_vm.caSelected.department))]),_c('mu-list-item',[_vm._v(\"项目 ：\"+_vm._s(_vm.caSelected.project))]),_c('mu-list-item',[_vm._v(\"用途：\"+_vm._s(_vm.caSelected.purpose))]),_c('mu-list-item',[_vm._v(\"地点 ：\"+_vm._s(_vm.caSelected.places))]),_c('mu-list-item',[_vm._v(\"计划出发时间：\"+_vm._s(_vm.caSelected.plantime1))]),_c('mu-list-item',[_vm._v(\"计划回程时间：\"+_vm._s(_vm.caSelected.plantime2))]),_c('mu-list-item',[_vm._v(\"是否省外：\"+_vm._s(_vm.caSelected.isshengwai?\"省外\":\"省内\"))]),(_vm.caSelected.carnumber)?_c('mu-list-item',[_vm._v(\"车辆：\"+_vm._s(_vm.caSelected.carnumber))]):_vm._e(),(_vm.caSelected.carnumber)?_c('mu-list-item',[_vm._v(\"司机：\"+_vm._s(_vm.caSelected.driver.name))]):_vm._e()],1),_vm._v(\"分配司机：\\n      \"),_c('mu-select',{attrs:{\"disabled\":_vm.caSelected.carnumber,\"full-width\":\"\"},model:{value:(_vm.selectDriverIndex),callback:function ($$v) {_vm.selectDriverIndex=$$v},expression:\"selectDriverIndex\"}},_vm._l((_vm.useableDrivers),function(driver,index){return _c('mu-option',{key:index,attrs:{\"label\":driver.name,\"value\":index}})}),1),_vm._v(\"分配车辆：\\n      \"),_c('mu-select',{attrs:{\"disabled\":_vm.caSelected.carnumber,\"full-width\":\"\"},model:{value:(_vm.selectCarIndex),callback:function ($$v) {_vm.selectCarIndex=$$v},expression:\"selectCarIndex\"}},_vm._l((_vm.useableCars),function(car,index){return _c('mu-option',{key:index,attrs:{\"label\":car.number+','+ car.brand+','+car.sites +'座',\"value\":index}})}),1),_c('mu-button',{attrs:{\"slot\":\"actions\",\"disabled\":_vm.caSelected.carnumber,\"color\":\"red\"},on:{\"click\":_vm.doSend},slot:\"actions\"},[_vm._v(\"确认派车\")]),_c('mu-button',{attrs:{\"slot\":\"actions\",\"color\":\"red\"},on:{\"click\":_vm.doReceive},slot:\"actions\"},[_vm._v(\"确认收车\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <task-header>我的调度</task-header>\r\n\r\n    <!-- <span style=\"font-size:1rem;\">待分配车辆申请列表</span> -->\r\n    <mu-list @change=\"listChange\">\r\n      <mu-list-item v-for=\"item, key in carApplyinfos\" button :ripple=\"false\" :value=\"key\">\r\n        <mu-list-item-title>{{item.user.name}} <span style=\"margin-left:10px;\">{{item.project}}</span></mu-list-item-title>\r\n      \r\n\r\n        <mu-list-item-action>\r\n          <div>\r\n            \r\n            <br>\r\n            <span>{{item.carnumber?\"已派车\":\"待派车\"}}</span><br>\r\n            <span>{{item.isback?\"待收车\":\"未返回\"}}</span>\r\n          </div>\r\n        </mu-list-item-action>\r\n      </mu-list-item>\r\n    </mu-list>\r\n\r\n    <mu-dialog\r\n      title=\"分配司机、车辆\"\r\n      scrollable\r\n      width=\"600\"\r\n      transition=\"slide-bottom\"\r\n      :open.sync=\"openAllotFullscreen\"\r\n    >\r\n      <mu-paper :z-depth=\"1\" class=\"demo-list-wrap\">\r\n        <mu-list>\r\n          <mu-list-item>用车人：{{caSelected.user?caSelected.user.name:\"\"}}</mu-list-item>\r\n          <mu-list-item>部门 ：{{caSelected.department}}</mu-list-item>\r\n          <mu-list-item>项目 ：{{caSelected.project}}</mu-list-item>\r\n          <mu-list-item>用途：{{caSelected.purpose}}</mu-list-item>\r\n          <mu-list-item>地点 ：{{caSelected.places}}</mu-list-item>\r\n          <mu-list-item>计划出发时间：{{caSelected.plantime1}}</mu-list-item>\r\n          <mu-list-item>计划回程时间：{{caSelected.plantime2}}</mu-list-item>\r\n          <mu-list-item>是否省外：{{caSelected.isshengwai?\"省外\":\"省内\"}}</mu-list-item>\r\n          <mu-list-item v-if=\"caSelected.carnumber\">车辆：{{caSelected.carnumber}}</mu-list-item>\r\n          <mu-list-item v-if=\"caSelected.carnumber\">司机：{{caSelected.driver.name}}</mu-list-item>\r\n        </mu-list>分配司机：\r\n        <mu-select v-model=\"selectDriverIndex\" :disabled=\"caSelected.carnumber\" full-width>\r\n          <mu-option\r\n            v-for=\"driver,index in useableDrivers\"\r\n            :key=\"index\"\r\n            :label=\"driver.name\"\r\n            :value=\"index\"\r\n          ></mu-option>\r\n        </mu-select>分配车辆：\r\n        <mu-select v-model=\"selectCarIndex\" :disabled=\"caSelected.carnumber\" full-width>\r\n          <mu-option\r\n            v-for=\"car,index in useableCars\"\r\n            :key=\"index\"\r\n            :label=\"car.number+','+ car.brand+','+car.sites +'座'\"\r\n            :value=\"index\"\r\n          ></mu-option>\r\n        </mu-select>\r\n        <mu-button slot=\"actions\" @click=\"doSend\" :disabled=\"caSelected.carnumber\" color=\"red\">确认派车</mu-button>\r\n        <mu-button slot=\"actions\" @click=\"doReceive\" color=\"red\">确认收车</mu-button>\r\n      </mu-paper>\r\n    </mu-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\nimport TaskHeader from \"./TaskHeader\";\r\nexport default {\r\n  name: \"MyDispatch\",\r\n  components: {\r\n    TaskHeader\r\n  },\r\n  data() {\r\n    return {\r\n      openAllotFullscreen: false,\r\n      carApplyinfos: [], //[{\"id\":1,\"cuaccount\":\"gaoqf\",\"reason\":\"北京GIS遥感大会\",\"nofp\":2,\"departure\":\"郑州\",\"destination\":\"北京\",\"date1\":\"2018-10-22T03:19:00.000Z\",\"date2\":\"2018-10-24T03:19:00.000Z\",\"u1name\":\"高庆方\",\"u2name\":\"\",\"u3name\":\"高庆方\"}]\r\n      useableDrivers: [],\r\n      useableCars: [],\r\n      selectedCaIndex: \"\",\r\n      selectDriverIndex: \"\",\r\n      selectCarIndex: \"\",\r\n      caSelected: {}\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"userinfo\", \"r\"])\r\n  },\r\n  methods: {\r\n    async doReceive() {\r\n      const self = this;\r\n      try {\r\n        var resp = await this.r.post(\"upsert_ucf\", {\r\n          id: this.caSelected.id,\r\n          receiveraccount: this.userinfo.account,\r\n          isreceived: 1\r\n        });\r\n        let data = resp.data;\r\n        if (data.code == 0) {\r\n          this.carApplyinfos.splice(this.selectedCaIndex, 1);\r\n          this.selectedCaIndex = \"\";\r\n          this.caSelected = {};\r\n          this.$alert(\"收车成功\");\r\n\r\n          this.getUnallotedCarApplyinfos();\r\n          this.getUseableCars();\r\n          this.getUseableDrivers();\r\n        }\r\n\r\n        if (data.code != 0) {\r\n          this.$alert(\"收车失败\");\r\n        }\r\n      } catch (error) {\r\n        this.$alert(\"收车失败\");\r\n      }\r\n      this.openAllotFullscreen = false;\r\n    },\r\n    async doSend() {\r\n      const self = this;\r\n      try {\r\n        var resp = await this.r.post(\"upsert_ucf\", {\r\n          id: this.caSelected.id,\r\n          senderaccount: this.userinfo.account,\r\n          driveraccount: this.useableDrivers[this.selectDriverIndex].account,\r\n          carnumber: this.useableCars[this.selectCarIndex].number\r\n        });\r\n        // console.log(resp.data);\r\n        let data = resp.data;\r\n        if (data.code == 0) {\r\n          this.getUnallotedCarApplyinfos();\r\n          this.getUseableCars();\r\n          this.getUseableDrivers();\r\n\r\n          this.selectedCaIndex = \"\";\r\n          this.selectDriverIndex = \"\";\r\n          this.selectCarIndex = \"\";\r\n          this.caSelected = {};\r\n          this.$alert(\"车辆、司机分配成功\");\r\n        }\r\n\r\n        if (data.code != 0) {\r\n          this.$alert(data.msg);\r\n        }\r\n      } catch (error) {\r\n        this.$alert(\"车辆、司机分配失败\");\r\n      }\r\n      this.openAllotFullscreen = false;\r\n    },\r\n    listChange(value) {\r\n      this.selectedCaIndex = value;\r\n      this.caSelected = this.carApplyinfos[this.selectedCaIndex];\r\n      this.openAllotFullscreen = true;\r\n    },\r\n    getUseableDrivers() {\r\n      const self = this;\r\n      this.r\r\n        .post(\"getusers\", { rolename: \"司机\", state: 0 })\r\n        .then(function(resp) {\r\n          let data = resp.data;\r\n          if (data.code == 0) {\r\n            self.useableDrivers = JSON.parse(data.msg);\r\n            //  this.$alert(data.msg);\r\n          }\r\n\r\n          if (data.code == 1) {\r\n            self.$alert(data.msg);\r\n          }\r\n        })\r\n        .catch(function(err) {\r\n          self.$alert(err);\r\n        });\r\n    },\r\n    getUseableCars() {\r\n      const self = this;\r\n      this.r\r\n        .post(\"getcars\", { state: 0 })\r\n        .then(function(resp) {\r\n          let data = resp.data;\r\n          if (data.code == 0) {\r\n            self.useableCars = JSON.parse(data.msg);\r\n            //  this.$alert(data.msg);\r\n          }\r\n\r\n          if (data.code == 1) {\r\n            self.$alert(data.msg);\r\n          }\r\n        })\r\n        .catch(function(err) {\r\n          self.$alert(err);\r\n        });\r\n    },\r\n    getUnallotedCarApplyinfos() {\r\n      const self = this;\r\n      this.r\r\n        .post(\"getucfs_admin\")\r\n        .then(function(resp) {\r\n          let data = resp.data;\r\n          if (data.code == 0) {\r\n            self.carApplyinfos = data.msg;\r\n            // this.$alert(data.msg);\r\n          }\r\n\r\n          if (data.code == 1) {\r\n            self.$alert(data.msg);\r\n          }\r\n        })\r\n        .catch(function(err) {\r\n          self.$alert(err);\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUnallotedCarApplyinfos();\r\n    this.getUseableCars();\r\n    this.getUseableDrivers();\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyDispatch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyDispatch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MyDispatch.vue?vue&type=template&id=594103a2&\"\nimport script from \"./MyDispatch.vue?vue&type=script&lang=js&\"\nexport * from \"./MyDispatch.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}